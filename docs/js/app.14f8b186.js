(function(e){function t(t){for(var a,s,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},o=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/low-bandwith-video-chat/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},1856:function(e,t,r){e.exports=r.p+"img/not_present.27679513.svg"},2:function(e,t){},3:function(e,t){},"37d5":function(e,t,r){e.exports=r.p+"img/hand_raised.2497ef8d.svg"},4:function(e,t){},5:function(e,t){},5614:function(e,t,r){"use strict";r("8603")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{style:{background:e.$vuetify.theme.themes.light.background}},[r("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[r("v-icon",{staticClass:"white--text mr-2"},[e._v(" mdi-forum ")]),r("span",{staticClass:"text-h6 font-weight-bold white--text"},[e._v(" Low-Bandwith-Video-Chat ")]),r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{target:"_blank",text:""},on:{click:e.handleSettiingsClick}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-cog")]),r("span",{staticClass:"mr-2"},[e._v("Settings")])],1)],1),r("v-main",[r("router-view")],1)],1)},o=[],s=r("5530"),i=r("2f62"),c={name:"App",data:function(){return{}},created:function(){this.$store.dispatch("bindUsers")},methods:Object(s["a"])(Object(s["a"])({},Object(i["c"])(["setOpenDialog"])),{},{handleSettiingsClick:function(){this.setOpenDialog(!0)}})},l=c,u=r("2877"),d=r("6544"),m=r.n(d),p=r("7496"),v=r("40dc"),h=r("8336"),f=r("132d"),b=r("f6c4"),g=r("2fa4"),j=Object(u["a"])(l,n,o,!1,null,null,null),w=j.exports;m()(j,{VApp:p["a"],VAppBar:v["a"],VBtn:h["a"],VIcon:f["a"],VMain:b["a"],VSpacer:g["a"]});var y=r("8c4f"),C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{width:"800",persistent:!e.newUser},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[r("TutorialStepper",{attrs:{newUser:e.newUser},on:{"close-dialogue":e.handleCloseDialogue}})],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"5"}},[r("WebcamAndPrediction")],1),r("v-col",{attrs:{cols:"12",md:"7"}},[r("Peers"),r("Chat")],1)],1)],1)},k=[],x=(r("ce1a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"pa-2",attrs:{elevation:"2"}},[r("v-row",{attrs:{"no-gutters":""}},e._l(e.users,(function(t){return r("v-col",{key:t.name,staticClass:"pa-1",attrs:{cols:"12",md:"4"}},[r("v-card",{staticClass:"pl-3",attrs:{elevation:"0",outlined:""}},[r("v-row",[r("v-col",{attrs:{cols:"4",align:"center"}},[r("v-avatar",{attrs:{size:"60",color:"linenLighter"}},[r("Emoji",{staticClass:"mt-3",attrs:{status:t.status,gender:t.emojiGender,skinTone:t.emojiColor,heartEmojiColor:t.heartEmojiColor,notPresentEmojiType:t.notPresentEmojiType,size:"md"}})],1)],1),r("v-col",{attrs:{cols:"8"}},[r("div",{staticClass:"text-truncate text-h6 font-weight-bold primary--text mt-3"},[e._v(" "+e._s(t["nickname"])+" ")])])],1)],1)],1)})),1)],1)}),E=[],_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("p",{class:e.sizeClass},[e._v(e._s(e.emoji))])])},O=[],P={data:function(){return{}},props:{status:String,skinTone:String,gender:String,heartEmojiColor:String,notPresentEmojiType:String,size:String},computed:{sizeClass:function(){switch(this.size){case"xl":return"text-h1";case"lg":return"text-h2";case"md":return"text-h3";case"sm":return"text-h4";default:return"text-h3"}},emojiProvidesSkinColor:function(){return!0},emoji:function(){switch(this.status){case"hand-raised":return this.raiseHandEmoji;case"present":return this.presentEmoji;case"thumbs-up":return this.thumbsUpEmoji;case"heart":return this.heartEmoji;case"not-present":return this.notPresentEmoji;case"no-camera":return"âŒ";default:return"â“"}},presentEmoji:function(){switch(this.skinTone){case"light":switch(this.gender){case"male":return"ðŸ‘¨ðŸ»";case"female":return"ðŸ‘©ðŸ»";default:return"ðŸ§‘ðŸ»"}case"medium-light":switch(this.gender){case"male":return"ðŸ‘¨ðŸ¼";case"female":return"ðŸ‘©ðŸ¼";default:return"ðŸ§‘ðŸ¼"}case"medium":switch(this.gender){case"male":return"ðŸ‘¨ðŸ½";case"female":return"ðŸ‘©ðŸ½";default:return"ðŸ§‘ðŸ½"}case"medium-dark":switch(this.gender){case"male":return"ðŸ‘¨ðŸ¾";case"female":return"ðŸ‘©ðŸ¾";default:return"ðŸ§‘ðŸ¾"}case"dark":switch(this.gender){case"male":return"ðŸ‘¨ðŸ¿";case"female":return"ðŸ‘©ðŸ¿";default:return"ðŸ§‘ðŸ¿"}default:switch(this.gender){case"male":return"ðŸ‘¨";case"female":return"ðŸ‘©";default:return"ðŸ§‘"}}},raiseHandEmoji:function(){switch(this.skinTone){case"light":switch(this.gender){case"male":return"ðŸ™‹ðŸ»â€â™‚ï¸";case"female":return"ðŸ™‹ðŸ»â€â™€ï¸";default:return"ðŸ™‹ðŸ»"}case"medium-light":switch(this.gender){case"male":return"ðŸ™‹ðŸ¼â€â™‚ï¸";case"female":return"ðŸ™‹ðŸ¼â€â™€ï¸";default:return"ðŸ™‹ðŸ¼"}case"medium":switch(this.gender){case"male":return"ðŸ™‹ðŸ½â€â™‚ï¸";case"female":return"ðŸ™‹ðŸ½â€â™€ï¸";default:return"ðŸ™‹ðŸ½"}case"medium-dark":switch(this.gender){case"male":return"ðŸ™‹ðŸ¾â€â™‚ï¸";case"female":return"ðŸ™‹ðŸ¾â€â™€ï¸";default:return"ðŸ™‹ðŸ¾"}case"dark":switch(this.gender){case"male":return"ðŸ™‹ðŸ¿â€â™‚ï¸";case"female":return"ðŸ™‹ðŸ¿â€â™€ï¸";default:return"ðŸ™‹ðŸ¿"}default:switch(this.gender){case"male":return"ðŸ™‹â€â™‚ï¸";case"female":return"ðŸ™‹â€â™€ï¸";default:return"ðŸ™‹"}}},thumbsUpEmoji:function(){switch(this.skinTone){case"light":return"ðŸ‘ðŸ»";case"medium-light":return"ðŸ‘ðŸ¼";case"medium":return"ðŸ‘ðŸ½";case"medium-dark":return"ðŸ‘ðŸ¾";case"dark":return"ðŸ‘ðŸ¿";default:return"ðŸ‘"}},heartEmoji:function(){switch(this.heartEmojiColor){case"red":return"â¤ï¸";case"orange":return"ðŸ§¡";case"yellow":return"ðŸ’›";case"green":return"ðŸ’š";case"blue":return"ðŸ’™";case"purple":return"ðŸ’œ";case"black":return"ðŸ–¤";case"white":return"ðŸ¤";case"brown":return"ðŸ¤Ž";default:return"â¤ï¸"}},notPresentEmoji:function(){switch(this.notPresentEmojiType){case"coffee":return"â˜•ï¸";case"tea":return"ðŸµ";case"juice":return"ðŸ§ƒ";case"beer":return"ðŸº";case"wine":return"ðŸ·";default:return"â˜•ï¸"}}},methods:{},mounted:function(){}},V=P,S=Object(u["a"])(V,_,O,!1,null,null,null),T=S.exports,N={components:{Emoji:T},computed:Object(s["a"])({},Object(i["d"])(["users"]))},U=N,D=r("8212"),I=r("b0af"),K=r("62ad"),L=r("0fd9"),A=Object(u["a"])(U,x,E,!1,null,null,null),G=A.exports;m()(A,{VAvatar:D["a"],VCard:I["a"],VCol:K["a"],VRow:L["a"]});var F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mt-4",attrs:{elevation:"2"}},[r("v-card-title",{staticClass:"pb-0"},[r("v-icon",{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-message")]),r("span",{staticClass:"primary--text font-weight-bold"},[e._v("Chat")])],1),r("v-card-text",e._l(e.msgs,(function(t,a){return r("div",{key:"chatmsg"+a,staticClass:"mb-2"},[r("div",{staticClass:"font-weight-bold primary--text"},[e._v(e._s(t.name))]),r("v-chip",{attrs:{color:"grey lighten-4"}},[e._v(e._s(t.text))])],1)})),0),r("v-card-actions",[r("v-text-field",{attrs:{outlined:"","hide-details":"","append-icon":"mdi-send"}})],1)],1)},R=[],$={name:"Chat",data:function(){return{msgs:[{name:"Lisa",text:"Hey guys, thanks for taking time for a quick meeting!"},{name:"Marcus",text:"sure, anytime!"},{name:"Jeff",text:"How long is it gonna take? I've got another meeting in about an hr or so"}]}}},z=$,B=r("99d9"),q=r("cc20"),H=r("8654"),M=Object(u["a"])(z,F,R,!1,null,null,null),W=M.exports;m()(M,{VCard:I["a"],VCardActions:B["a"],VCardText:B["b"],VCardTitle:B["c"],VChip:q["a"],VIcon:f["a"],VTextField:H["a"]});var J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[r("v-stepper-header",[r("v-stepper-step",{attrs:{complete:e.step>1,step:"1"}},[e._v("Introduction")]),r("v-divider"),r("v-stepper-step",{attrs:{complete:e.step>2,step:"2"}},[e._v("Set your nickname")]),r("v-divider"),r("v-stepper-step",{attrs:{step:"3"}},[e._v("Choose your emoji color and gender")])],1),r("v-stepper-items",[r("v-stepper-content",{attrs:{step:"1"}},[r("div",[e._v(" Do you want to chat with your friends or take part in a school meeting, but your wifi can't handle all that video bandwith? Fret no more! Our low-bandwith video chat will analyze your video feed without needing to send all that data to your friends and colleagues. All you need to get started is to choose your preferred emoji style and color! ")]),r("v-img",{attrs:{"aspect-ratio":"1.7",contain:"",src:"https://us.123rf.com/450wm/microone/microone1907/microone190700323/128173861-stock-vector-video-conference-people-group-on-computer-screen-taking-with-colleague-video-conferencing-and-online.jpg?ver=6","max-height":"250"}}),r("v-btn",{attrs:{tabindex:"0",color:"primary"},on:{click:function(t){e.step=2}}},[e._v("Continue")]),r("v-btn",{attrs:{text:"",disabled:e.newUser},on:{click:e.sendCloseEvent}},[e._v("Cancel")])],1),r("v-stepper-content",{attrs:{step:"2"}},[e._v(" To make sure that others recognize you please set your unique nickname for this chat! "),r("v-form",{on:{submit:function(e){e.preventDefault()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-container",[r("v-text-field",{attrs:{rules:e.nameRules,label:"Nickname",required:""},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)],1),r("v-btn",{attrs:{tabindex:"0",color:"primary",disabled:!e.valid},on:{click:function(t){e.step=3}}},[e._v("Continue")]),r("v-btn",{attrs:{text:"",disabled:e.newUser},on:{click:e.sendCloseEvent}},[e._v("Cancel")])],1),r("v-stepper-content",{attrs:{step:"3"}},[e._v(" You can customize the color, gender and style of your emojis to fit your preferences as well: "),r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("v-container",{attrs:{fluid:""}},[r("v-row",[r("v-col",{attrs:{cols:"3"}},[e._v(" Color: "),r("v-radio-group",{attrs:{column:""},model:{value:e.emojiColor,callback:function(t){e.emojiColor=t},expression:"emojiColor"}},[r("v-radio",{attrs:{label:"ðŸ‘‹",color:"yellow",value:"skinColorDefault"}}),r("v-radio",{attrs:{label:"ðŸ‘‹ðŸ»",color:"red darken-3",value:"light"}}),r("v-radio",{attrs:{label:"ðŸ‘‹ðŸ¼",color:"indigo",value:"medium-light"}}),r("v-radio",{attrs:{label:"ðŸ‘‹ðŸ½",color:"indigo darken-3",value:"medium"}}),r("v-radio",{attrs:{label:"ðŸ‘‹ðŸ¾",color:"orange",value:"medium-dark"}}),r("v-radio",{attrs:{label:"ðŸ‘‹ðŸ¿",color:"orange darken-3",value:"dark"}})],1)],1),r("v-col",{attrs:{cols:"3"}},[e._v(" Gender: "),r("v-radio-group",{attrs:{column:""},model:{value:e.emojiGender,callback:function(t){e.emojiGender=t},expression:"emojiGender"}},[r("v-radio",{attrs:{label:"ðŸ‘©",color:"red",value:"female"}}),r("v-radio",{attrs:{label:"ðŸ‘¨",color:"indigo",value:"male"}}),r("v-radio",{attrs:{label:"ðŸ§‘",color:"indigo darken-3",value:"genderneutral"}})],1)],1),r("v-col",{attrs:{cols:"3"}},[e._v(" Not Present: "),r("v-radio-group",{attrs:{column:""},model:{value:e.notPresentEmojiType,callback:function(t){e.notPresentEmojiType=t},expression:"notPresentEmojiType"}},[r("v-radio",{attrs:{label:"â˜•ï¸",color:"red",value:"coffee"}}),r("v-radio",{attrs:{label:"ðŸµ",color:"indigo",value:"tea"}}),r("v-radio",{attrs:{label:"ðŸ§ƒ",color:"indigo darken-3",value:"juice"}}),r("v-radio",{attrs:{label:"ðŸº",color:"orange",value:"beer"}}),r("v-radio",{attrs:{label:"ðŸ·",color:"orange darken-3",value:"wine"}})],1)],1),r("v-col",{attrs:{cols:"3"}},[e._v(" Heart Sign: "),r("v-radio-group",{attrs:{column:""},model:{value:e.heartEmojiColor,callback:function(t){e.heartEmojiColor=t},expression:"heartEmojiColor"}},[r("v-radio",{attrs:{label:"â¤ï¸",color:"red",value:"red"}}),r("v-radio",{attrs:{label:"ðŸ§¡",color:"indigo",value:"orange"}}),r("v-radio",{attrs:{label:"ðŸ’›",color:"indigo darken-1",value:"yellow"}}),r("v-radio",{attrs:{label:"ðŸ’š",color:"orange",value:"green"}}),r("v-radio",{attrs:{label:"ðŸ’™",color:"orange darken-2",value:"blue"}}),r("v-radio",{attrs:{label:"ðŸ’œ",color:"orange darken-3",value:"purple"}}),r("v-radio",{attrs:{label:"ðŸ–¤",color:"orange darken-4",value:"black"}}),r("v-radio",{attrs:{label:"ðŸ¤",color:"orange darken-5",value:"white"}}),r("v-radio",{attrs:{label:"ðŸ¤Ž",color:"orange darken-6",value:"brown"}})],1)],1)],1)],1)],1)],1),r("v-btn",{attrs:{tabindex:"0",color:"primary"},on:{click:e.sendCloseEvent}},[e._v("Continue")]),r("v-btn",{attrs:{text:"",disabled:e.newUser},on:{click:e.sendCloseEvent}},[e._v("Cancel")])],1)],1)],1)},Y=[],Q={data:function(){return{newUser:!0,step:1,emojiColor:"skinColorDefault",emojiGender:"female",heartEmojiColor:"red",notPresentEmojiType:"coffee",valid:!1,nickname:"",nameRules:[function(e){return!!e||"Nickname is required"}]}},methods:{sendCloseEvent:function(){this.step=2,this.newUser=!1,this.$emit("close-dialogue",{nickname:this.nickname,emojiColor:this.emojiColor,emojiGender:this.emojiGender,heartEmojiColor:this.heartEmojiColor,notPresentEmojiType:this.notPresentEmojiType})}}},X=Q,Z=r("a523"),ee=r("ce7e"),te=r("4bd4"),re=r("adda"),ae=r("67b6"),ne=r("43a6"),oe=r("7e85"),se=r("e516"),ie=r("9c54"),ce=r("56a4"),le=Object(u["a"])(X,J,Y,!1,null,null,null),ue=le.exports;m()(le,{VBtn:h["a"],VCard:I["a"],VCardText:B["b"],VCol:K["a"],VContainer:Z["a"],VDivider:ee["a"],VForm:te["a"],VImg:re["a"],VRadio:ae["a"],VRadioGroup:ne["a"],VRow:L["a"],VStepper:oe["a"],VStepperContent:se["a"],VStepperHeader:ie["a"],VStepperItems:ie["b"],VStepperStep:ce["a"],VTextField:H["a"]});var de=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{color:"grey lighten-4",elevation:"12"}},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",{staticClass:"margin",attrs:{flat:"",color:"transparent",rounded:"lg",align:"center"}},[r("v-card-text",[r("div",[e.webcamSetupFinished?e._e():r("div",[r("v-icon",{attrs:{"x-large":""}},[e._v("mdi-webcam")]),r("p",{staticClass:"text-body-2 grey--text text--darken-3"},[e._v("Please enable your webcam to use Low-Bandwith-Video-Chat.")]),e.webcamIsLoading?r("v-progress-circular",{attrs:{color:"primary",indeterminate:""}}):e._e()],1),e.webcamSetupFinished?r("v-avatar",{attrs:{color:"linenLighter",size:"150"}},[r("div",{ref:"webcam",staticClass:"webcam"})]):e._e()],1)])],1)],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",{attrs:{color:"transparent",outlined:"",height:"100%",align:"center"}},[r("v-card-text",[r("v-avatar",{attrs:{size:"155",color:"primaryAccent3"}},[r("Emoji",{attrs:{status:e.currentState,gender:e.emojiIdentity.gender,skinTone:e.emojiIdentity.skinTone,heartEmojiColor:e.heartEmojiColor,notPresentEmojiType:e.notPresentEmojiType,size:"xl"}})],1)],1)],1)],1)],1),r("v-row",{staticClass:"pa-2",attrs:{dense:""}},[e._l(e.statesImplemented,(function(t){return r("v-col",{key:t.className,attrs:{cols:"6"}},[r("v-card",{class:t.className===e.currentPrediction.className?"primaryAccent2":"primaryAccent3",attrs:{flat:"",height:"100%"}},[r("v-card-text",{staticClass:"pt-0"},[r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-avatar",{attrs:{tile:"",size:"30"}},[r("v-img",{attrs:{contain:"",src:t.icon}})],1)],1),r("v-col",{attrs:{cols:"8"}},[r("span",{class:t.className===e.currentPrediction.className?"text-overline font-weight-black primary--text":"text-overline"},[e._v(" "+e._s(t.className)+" ")])])],1),r("v-progress-linear",{attrs:{value:t.className===e.currentPrediction.className?e.getProgressBarValue:0,stream:"","buffer-value":"0",color:"primary"}})],1)],1)],1)})),r("v-row",{staticClass:"text-center",attrs:{"no-gutters":""}},[r("v-col",[r("p",{staticClass:"text-caption primaryAccent1--text mb-0"},[e._v("Icons made by "),r("a",{attrs:{href:"https://www.freepik.com",title:"Freepik"}},[e._v("Freepik")]),e._v(" from "),r("a",{attrs:{href:"https://www.flaticon.com/",title:"Flaticon"}},[e._v("www.flaticon.com")])])])],1)],2)],1)},me=[],pe=(r("96cf"),r("1da1")),ve=r("080e"),he=r("260b"),fe=(r("66ce"),he["a"].initializeApp({databaseURL:"https://low-bandwidth-video-chat-default-rtdb.europe-west1.firebasedatabase.app"}).database()),be={components:{Emoji:T},data:function(){return{model:null,webcam:null,webcamIsLoading:!1,url:"https://teachablemachine.withgoogle.com/models/erVKbrLsV/",webcamSetupFinished:!1,statesImplemented:[{className:"present",icon:r("8bb4")},{className:"not-present",icon:r("1856")},{className:"hand-raised",icon:r("37d5")},{className:"thumbs-up",icon:r("d83c")},{className:"heart",icon:r("efe2")}]}},watch:{userKey:function(){this.requestWebcam()},currentPrediction:function(e){this.currentState!==e.className&&e.noOfConsecutiveLoops>4&&(this.setCurrentState(e.className),this.updateStatusInDB())}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["d"])(["users","currentPrediction","predictions","userKey","emojiIdentity","currentState","heartEmojiColor","notPresentEmojiType"])),Object(i["b"])(["classWithHighestValueFromLatestPrediction"])),{},{getProgressBarValue:function(){return this.currentPrediction.noOfConsecutiveLoops<5?25*this.currentPrediction.noOfConsecutiveLoops:100}}),methods:Object(s["a"])(Object(s["a"])({},Object(i["c"])(["setPrediction","setCurrentState"])),{},{requestWebcam:function(){var e=this;return Object(pe["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e,a="".concat(e.url,"model.json"),n="".concat(e.url,"metadata.json"),o=!0,t.next=6,ve["load"](a,n);case 6:return e.model=t.sent,e.webcam=new ve["Webcam"](150,150,o),t.next=10,e.webcam.setup();case 10:return e.webcamIsLoading=!0,t.next=13,e.webcam.play();case 13:e.webcamSetupFinished=!0,setTimeout((function(){var e=r.$refs.webcam;e.appendChild(r.webcam.canvas)}),500),window.requestAnimationFrame(e.loop);case 16:case"end":return t.stop()}}),t)})))()},loop:function(){var e=this;return Object(pe["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!e.userKey){t.next=5;break}return r.webcam.update(),t.next=5,e.predict();case 5:setTimeout((function(){window.requestAnimationFrame(r.loop)}),300);case 6:case"end":return t.stop()}}),t)})))()},predict:function(){var e=this;return Object(pe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,e.model.predict(e.webcam.canvas);case 3:t.t1=t.sent,t.t0.setPrediction.call(t.t0,t.t1),console.log(e.currentPrediction),console.log("predictions",e.predictions);case 7:case"end":return t.stop()}}),t)})))()},updateStatusInDB:function(){fe.ref("users").child(this.userKey).update({status:this.currentState})}})},ge=be,je=r("490a"),we=r("8e36"),ye=Object(u["a"])(ge,de,me,!1,null,null,null),Ce=ye.exports;m()(ye,{VAvatar:D["a"],VCard:I["a"],VCardText:B["b"],VCol:K["a"],VIcon:f["a"],VImg:re["a"],VProgressCircular:je["a"],VProgressLinear:we["a"],VRow:L["a"]});var ke={components:{Peers:G,Chat:W,TutorialStepper:ue,WebcamAndPrediction:Ce},data:function(){return{dialog:!0,model:null,url:"https://teachablemachine.withgoogle.com/models/erVKbrLsV/",nickname:"",emojiColor:"",emojiGender:"",userKey:"",newUser:!0}},created:function(){document.addEventListener("beforeunload",this.leaving),window.addEventListener("beforeunload",this.leaving)},methods:Object(s["a"])(Object(s["a"])({},Object(i["c"])(["setUserKey","setEmojiSettings","setOpenDialog"])),{},{getIcon:function(e){switch(e){case"present":return"mdi-check-bold";case"not present":return"mdi-close-thick";case"hand raised":return"mdi-hand";default:return"mdi-exclamation-thick"}},handleCloseDialogue:function(e){var t=e.nickname,r=e.emojiColor,a=e.emojiGender,n=e.heartEmojiColor,o=e.notPresentEmojiType;if(this.nickname=t,this.emojiColor=r,this.emojiGender=a,this.dialog=!1,this.newUser){var s=fe.ref("users").push().getKey();this.userKey=s,this.$store.dispatch("addNewUser",{nickname:t,emojiColor:r,emojiGender:a,userKey:s,heartEmojiColor:n,notPresentEmojiType:o}),this.setUserKey(s),this.newUser=!1}else{var i=this.userKey;this.$store.dispatch("updateUserSettings",{nickname:t,emojiColor:r,emojiGender:a,userKey:i,heartEmojiColor:n,notPresentEmojiType:o}),this.setUserKey(i)}this.setOpenDialog(!1),this.setEmojiSettings({emojiGender:a,emojiColor:r,heartEmojiColor:n,notPresentEmojiType:o})},leaving:function(){var e=this.userKey;this.$store.dispatch("deleteUser",{userKey:e})}}),computed:Object(s["a"])({},Object(i["d"])(["users","currentPrediction","openDialog"]))},xe=ke,Ee=(r("5614"),r("169a")),_e=Object(u["a"])(xe,C,k,!1,null,"3091a326",null),Oe=_e.exports;m()(_e,{VCol:K["a"],VContainer:Z["a"],VDialog:Ee["a"],VRow:L["a"]}),a["a"].use(y["a"]);var Pe=[{path:"/",name:"Home",component:Oe}],Ve=new y["a"]({mode:"history",base:"/low-bandwith-video-chat/",routes:Pe}),Se=Ve,Te=(r("b64b"),r("3317"));a["a"].use(i["a"]);var Ne=new i["a"].Store({state:{users:[],userKey:"",predictions:[],currentPrediction:{},currentState:"no-webcam",openDialog:"true",emojiIdentity:{skinTone:"light",gender:"male"},heartEmojiColor:"red",notPresentEmojiType:"coffee"},getters:{},mutations:Object(s["a"])(Object(s["a"])({},Te["b"]),{},{setPrediction:function(e,t){e.predictions=t;for(var r=e.currentPrediction,a=0,n=0;n<t.length;n++)t[n].probability>t[a].probability&&(a=n);var o={};o.className=t[a].className,o.probability=t[a].probability,console.log("objkect.keys",Object.keys(r),Object.keys(r).length&&r.className===o.className,r.className,o.className),Object.keys(r).length&&r.className===o.className?o.noOfConsecutiveLoops=r.noOfConsecutiveLoops+1:o.noOfConsecutiveLoops=1,e.currentPrediction=o},setUserKey:function(e,t){e.userKey=t},setEmojiSettings:function(e,t){var r=t.emojiGender,a=t.emojiColor,n=t.heartEmojiColor,o=t.notPresentEmojiType;console.log(r,a),e.emojiIdentity.gender=r,e.emojiIdentity.skinTone=a,e.heartEmojiColor=n,e.notPresentEmojiType=o},setOpenDialog:function(e,t){e.openDialog=t},setCurrentState:function(e,t){e.currentState=t}}),actions:{bindUsers:Object(Te["a"])((function(e){var t=e.bindFirebaseRef;console.log("users"),t("users",fe.ref("users"))})),deleteUser:Object(Te["a"])((function(e,t){fe.ref("users").child(t.userKey).remove()})),addNewUser:Object(Te["a"])((function(e,t){fe.ref("users").child(t.userKey).update({nickname:t.nickname,emojiColor:t.emojiColor,emojiGender:t.emojiGender,heartEmojiColor:t.heartEmojiColor,notPresentEmojiType:t.notPresentEmojiType,status:"no-webcam"})})),updateUserSettings:Object(Te["a"])((function(e,t){fe.ref("users").child(t.userKey).update({nickname:t.nickname,emojiColor:t.emojiColor,emojiGender:t.emojiGender,heartEmojiColor:t.heartEmojiColor,notPresentEmojiType:t.notPresentEmojiType})}))},modules:{}}),Ue=r("f309");a["a"].use(Ue["a"]);var De=new Ue["a"]({theme:{themes:{light:{primary:"#015249",primaryAccent1:"#739793",primaryAccent2:"#aabab8",primaryAccent3:"#d9dcdc",linen:"#cfcabc",linenDarker:"#C4BDAC",linenLighter:"#e1ded5",linenLighter2:"#F9F5F0",secondary:"#25182c",accent:"#3F51B5",background:"#aabab8"}}}});a["a"].config.productionTip=!1,new a["a"]({router:Se,store:Ne,vuetify:De,render:function(e){return e(w)}}).$mount("#app")},6:function(e,t){},8603:function(e,t,r){},"8bb4":function(e,t,r){e.exports=r.p+"img/present.b97edd03.svg"},d83c:function(e,t,r){e.exports=r.p+"img/hand_thumbs_up.6dfedd51.svg"},efe2:function(e,t,r){e.exports=r.p+"img/hand_heart.cebae3d2.svg"}});
//# sourceMappingURL=app.14f8b186.js.map